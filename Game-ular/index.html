<!DOCTYPE html>
<html>
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="icon.png">
  <title>GAME ULAR by CAHYA KRISNA</title>

  <style>

    #start-btn {
    margin-top: 300px;
    margin-left: 345px;
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
    }

    #game-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgb(2, 47, 88);
    background-repeat: no-repeat;
    background-size: cover;
    z-index: -1;
    }

    #game-board {
      position: relative;
      width: 800px;
      height: 500px;
      border: 1px solid black;
      background-image: url('image.jpg');
      
    }

    .snake {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: green;
      border-radius: 50%;
    }

    .snake-eye {
      position: absolute;
      width: 4px;
      height: 4px;
      background-color: white;
      border-radius: 50%;
    }

    .food {
      position: absolute;
      width: 20px;
      height: 20px;
      background-color: red;
      border-radius: 50%;
    }

    #score {
      font-family: fantasy;
      margin-bottom: 450px;
      margin-right: 10px;
      font-size: 15px;
    }

    #game-over {
      display: none;
      text-align: center;
      margin-top: 20px;
    }

    #game-over p {
      margin-bottom: 10px;
      font-family: fantasy;
    }

    #game-over button {
      margin-right: 10px;
    }

    button {
      background-color: green;
      color: white;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }

    .centered {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #play-again-btn {
      margin-left: 10px;
    }

  #game-board h1 {
    font-family: Arial, Helvetica, sans-serif;
    color: aliceblue;
    font-size: 20px;
    text-align: center;
    text-shadow: 10%;
  }

  </style>
</head>
<body>
  <div id="game-background"></div>
  <div id="score">Skor: 0</div>
  <div class="centered">
  </div>
  <div id="game-board">
    <h1>GAME ULAR</h1>
    <h1>CAHYA KRISNA</h1>
    <button id="start-btn">Mulai Game</button>
    </div>
    
  <div id="game-over">
    <p>Game Over!</p>
    <p>Skor Anda: <span id="final-score"></span></p>
    <div class="centered">
      <button id="play-again-btn">Mulai Lagi</button>
      <button id="exit-btn">Keluar</button>
    </div>
  </div>

  <script>
    var snake = [{x: 200, y: 200}];
    var direction = 'right';
    var food = getRandomFoodPosition();
    var gameBoard = document.getElementById('game-board');
    var startBtn = document.getElementById('start-btn');
    var scoreElement = document.getElementById('score');
    var gameOverElement = document.getElementById('game-over');
    var finalScoreElement = document.getElementById('final-score');
    var playAgainBtn = document.getElementById('play-again-btn');
    var exitBtn = document.getElementById('exit-btn');
    var backgroundMusic = new Audio('Backsound Musik.mp3');
    var eatSound = new Audio('Makan.mp3');
    var gameOverSound = new Audio('GameOver.mp3');
    var score = 0;
    var gameRunning = false;
    var gameInterval;

    function startGame() {
      startBtn.style.display = 'none';
      gameRunning = true;
      backgroundMusic.play();
      document.addEventListener('keydown', changeDirection);
      gameInterval = setInterval(updateGame, 100);
    }

    function updateGame() {
      if (!gameRunning) return;
      clearBoard();
      moveSnake();
      if (isSnakeDead()) {
        gameOver();
        clearInterval(gameInterval);
        return;
      }
      if (isSnakeEatingFood()) {
        eatSound.play();
        expandSnake();
        food = getRandomFoodPosition();
        updateScore();
      }
      drawSnake();
      drawFood();
    }

    function clearBoard() {
      gameBoard.innerHTML = '';
    }

    function drawSnake() {
      snake.forEach((segment, index) => {
        var snakeElement = document.createElement('div');
        snakeElement.style.left = segment.x + 'px';
        snakeElement.style.top = segment.y + 'px';
        snakeElement.classList.add('snake');
        if (index === 0) {
          var eye1 = document.createElement('div');
          eye1.classList.add('snake-eye');
          eye1.style.left = '5px';
          eye1.style.top = '5px';
          var eye2 = document.createElement('div');
          eye2.classList.add('snake-eye');
          eye2.style.right = '5px';
          eye2.style.top = '5px';
          snakeElement.appendChild(eye1);
          snakeElement.appendChild(eye2);
        }
        gameBoard.appendChild(snakeElement);
      });
    }

    function moveSnake() {
      var newHead = {x: snake[0].x, y: snake[0].y};

      switch (direction) {
        case 'up':
          newHead.y -= 20;
          break;
        case 'down':
          newHead.y += 20;
          break;
        case 'left':
          newHead.x -= 20;
          break;
        case 'right':
          newHead.x += 20;
          break;
      }

      snake.unshift(newHead);
      snake.pop();
    }

    function changeDirection(event) {
      var keyPressed = event.keyCode;
      
      switch (keyPressed) {
        case 37:
          if (direction !== 'right') {
            direction = 'left';
          }
          break;
        case 38:
          if (direction !== 'down') {
            direction = 'up';
          }
          break;
        case 39:
          if (direction !== 'left') {
            direction = 'right';
          }
          break;
        case 40:
          if (direction !== 'up') {
            direction = 'down';
          }
          break;
      }
    }

    function expandSnake() {
      var tail = {...snake[snake.length - 1]};
      snake.push(tail);
    }

    function isSnakeDead() {
      var head = snake[0];
      if (
        head.x < 0 ||
        head.x >= gameBoard.offsetWidth ||
        head.y < 0 ||
        head.y >= gameBoard.offsetHeight ||
        snake.slice(1).some(segment => segment.x === head.x && segment.y === head.y)
      ) {
        return true;
      }
      return false;
    }

    function drawFood() {
      var foodElement = document.createElement('div');
      foodElement.style.left = food.x + 'px';
      foodElement.style.top = food.y + 'px';
      foodElement.classList.add('food');
      gameBoard.appendChild(foodElement);
    }

    function getRandomFoodPosition() {
      var x = Math.floor(Math.random() * 20) * 20;
      var y = Math.floor(Math.random() * 20) * 20;
      return {x: x, y: y};
    }

    function isSnakeEatingFood() {
      var head = snake[0];
      return head.x === food.x && head.y === food.y;
    }

    function updateScore() {
      score++;
      scoreElement.textContent = 'Skor: ' + score;
    }

    function gameOver() {
      gameRunning = false;
      backgroundMusic.pause();
      gameOverSound.play();
      finalScoreElement.textContent = score;
      gameOverElement.style.display = 'block';
      snake = [{x: 200, y: 200}];
      direction = 'right';
      food = getRandomFoodPosition();
      score = 0;
      scoreElement.textContent = 'Skor: 0';
    }

    function playAgain() {
      gameOverElement.style.display = 'none';
      startBtn.style.display = 'none';
      startGame();
    }

    function exitGame() {
      window.close();
    }

    startBtn.addEventListener('click', startGame);
    playAgainBtn.addEventListener('click', playAgain);
    exitBtn.addEventListener('click', exitGame);
  </script>
</body>
</html>
